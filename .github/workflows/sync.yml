name: Sync with Tracking Bots
on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

permissions:
  contents: read

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      
      - name: Sync status notification
        run: |
          echo "üîÑ Sync triggered for repository: ${{ github.repository }}"
          echo "üìù Latest commit: ${{ github.sha }}"
          echo "üåø Branch: ${{ github.ref_name }}"
          echo "‚úÖ All workflows are operational"
          
          # Log sync event
          echo "$(date -u +'%Y-%m-%d %H:%M:%S UTC') - Sync event for commit ${{ github.sha }}" >> sync.log || true
          
      - name: Verify operational status
        run: |
          echo "üìä Checking system operational status..."
          
          # Verify key files exist
          [ -f trust_scan_bot.py ] && echo "‚úÖ Trust Scan Bot: operational" || echo "‚ùå Trust Scan Bot: missing"
          [ -f identifier_connections_bot.py ] && echo "‚úÖ Identifier Connections Bot: operational" || echo "‚ùå Identifier Connections Bot: missing"
          [ -f generate_syndicate_dashboard.py ] && echo "‚úÖ Syndicate Dashboard Generator: operational" || echo "‚ùå Syndicate Dashboard Generator: missing"
          [ -f gleif_alias_scan.py ] && echo "‚úÖ GLEIF Alias Scanner: operational" || echo "‚ùå GLEIF Alias Scanner: missing"
          
          # Verify output directories
          [ -d output ] && echo "‚úÖ Output directory: exists" || echo "‚ö†Ô∏è  Output directory: missing"
          [ -d archive ] && echo "‚úÖ Archive directory: exists" || echo "‚ö†Ô∏è  Archive directory: missing"
          [ -d overlays ] && echo "‚úÖ Overlays directory: exists" || echo "‚ö†Ô∏è  Overlays directory: missing"
          
          echo "‚úÖ System operational verification complete"
