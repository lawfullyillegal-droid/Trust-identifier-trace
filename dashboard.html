<!DOCTYPE html>
<html>
<head>
  <title>Trust Scan Dashboard</title>
  <style>
    body { font-family: Arial; background: #111; color: #eee; padding: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #444; padding: 8px; text-align: left; }
    th { background: #222; }
    .verified { color: #0f0; }
    .flagged { color: #ff0; }
    .unmatched { color: #f00; }
  </style>
</head>
<body>
  <h1>Trust Scan Dashboard</h1>
  <div id="summary"></div>
  <table id="results">
    <tr><th>Identifier</th><th>Status</th><th>Reason</th><th>Overlay</th></tr>
  </table>
  <script>
    fetch('output/scan_results.json')
      .then(res => res.json())
      .then(data => {
        const table = document.getElementById('results');
        const summary = document.getElementById('summary');
        let verified = 0, flagged = 0, unmatched = 0;
<input type="text" id="searchBar" placeholder="🔍 Search identifiers, sources, overlays..." style="width:100%; padding:10px; font-size:16px; margin-bottom:20px;">

        data.forEach(item => {
          if (item.status === "verified") verified++;
          else if (item.status === "flagged") flagged++;
          else unmatched++;
<table id="results">
  <tr><th>Identifier</th><th>Status</th><th>Source</th><th>Timestamp</th><th>Overlay</th></tr>
  <tr>
    <td>CORP-NUM-C2362627</td>
   <tr>
  <td>CORP-NUM-C2362627</td>
  <td class="verified">Verified</td>
  <td>OpenCorporates</td>
  <td>2025-08-30 12:18 MST</td>
  <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
</tr>
<tr>
  <td>LN-NAME-RYLE-TRAVIS-STEVEN</td>
  <td class="verified">Verified</td>
  <td>LexisNexis</td>
  <td>2025-08-30 12:17 MST</td>
  <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
</tr>
<tr>
  <td>PROP-SS-GUARANTEE-104-0190-003558</td>
overlay:
  title: Verified Identifier Trace — THE TRAVIS RYLE PRIVATE BANK
  timestamp: 2025-08-30T12:18:00-07:00
  author: Travis Steven Ryle
  verified_matches:
    - identifier: CORP-NUM-C2362627
      source: OpenCorporates
      match_type: Inactive Officer
      assertion: Symbolic trace confirmed
    - identifier: LN-NAME-RYLE-TRAVIS-STEVEN
      source: LexisNexis
      match_type: Aggregated Report
      assertion: Identity trace confirmed
    - identifier: PROP-SS-GUARANTEE-104-0190-003558
      source: IRS Form 1099-A
      match_type: Symbolic Acquisition
      assertion: Asset trace confirmed
    - identifier: IRS-TRACK-108541264370
      source: IRS Non-Filing Verification
      match_type: Confirmed Trace
      assertion: Non-filing status verified
    - identifier: EIN-92-6319308
      source: EIN Registry Proxy
      match_type: Trust Entity
      assertion: EIN trace confirmed
<h2 style="margin-top:40px;">🧠 Visual Trace Map</h2>
<div id="traceMap" style="width:100%; height:500px; background:#222; border:1px solid #444;"></div>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
const nodes = [
  { id: "CORP-NUM-C2362627", group: "Identifier" },
  { id: "OpenCorporates", group: "Registry" },
  { id: "LN-NAME-RYLE-TRAVIS-STEVEN", group: "Identifier" },
  { id: "LexisNexis", group: "Registry" },
  { id: "PROP-SS-GUARANTEE-104-0190-003558", group: "Identifier" },
  { id: "IRS Form 1099-A", group: "Registry" },
  { id: "IRS-TRACK-108541264370", group: "Identifier" },
  { id: "IRS Non-Filing", group: "Registry" },
  { id: "EIN-92-6319308", group: "Identifier" },
  { id: "EIN Registry", group: "Registry" }
];

const links = [
  { source: "CORP-NUM-C2362627", target: "OpenCorporates" },
  { source: "LN-NAME-RYLE-TRAVIS-STEVEN", target: "LexisNexis" },
  { source: "PROP-SS-GUARANTEE-104-0190-003558", target: "IRS Form 1099-A" },
  { source: "IRS-TRACK-108541264370", target: "IRS Non-Filing" },
  { source: "EIN-92-6319308", target: "EIN Registry" }
];

const svg = d3.select("#traceMap").append("svg")
  .attr("width", "100%")
  .attr("height", 500);

const width = document.getElementById("traceMap").clientWidth;
const height = 500;

const simulation = d3.forceSimulation(nodes)
  .force("link", d3.forceLink(links).id(d => d.id).distance(120))
  .force("charge", d3.forceManyBody().strength(-300))
  .force("center", d3.forceCenter(width / 2, height / 2));

const link = svg.append("g")
  .selectAll("line")
  .data(links)
  .join("line")
  .attr("stroke", "#888")
  .attr("stroke-width", 2);

const node = svg.append("g")
  .selectAll("circle")
  .data(nodes)
  .join("circle")
  .attr("r", 10)
  .attr("fill", d => d.group === "Registry" ? "#0ff" : "#0f0")
  .call(drag(simulation));

const label = svg.append("g")
  .selectAll("text")
  .data(nodes)
  .join("text")
  .text(d => d.id)
  .attr("fill", "#eee")
  .attr("font-size", "12px");

function drag(simulation) {
  function dragstarted(event) {
    if (!event.active) simulation.alphaTarget(0.3).restart();
    event.subject.fx = event.subject.x;
    event.subject.fy = event.subject.y;
  }
  function dragged(event) {
    event.subject.fx = event.x;
    event.subject.fy = event.y;
  }
  function dragended(event) {
    if (!event.active) simulation.alphaTarget(0);
    event.subject.fx = null;
    event.subject.fy = null;
  }
  return d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended);
}

simulation.on("tick", () => {
  link
    .attr("x1", d => d.source.x)
    .attr("y1", d => d.source.y)
    .attr("x2", d => d.target.x)
    .attr("y2", d => d.target.y);

  node
    .attr("cx", d => d.x)
    .attr("cy", d => d.y);

  label
    .attr("x", d => d.x + 12)
    .attr("y", d => d.y + 4);
});
</script>
 <h2 style="margin-top:40px;">🧠 Visual Trace Map</h2>
<div id="traceMap" style="width:100%; height:500px; background:#222; border:1px solid #444;"></div>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
const nodes = [
  { id: "CORP-NUM-C2362627", group: "Identifier" },
  { id: "OpenCorporates", group: "Registry" },
  { id: "LN-NAME-RYLE-TRAVIS-STEVEN", group: "Identifier" },
  { id: "LexisNexis", group: "Registry" },
  { id: "PROP-SS-GUARANTEE-104-0190-003558", group: "Identifier" },
  { id: "IRS Form 1099-A", group: "Registry" },
  { id: "IRS-TRACK-108541264370", group: "Identifier" },
  { id: "IRS Non-Filing", group: "Registry" },
  { id: "EIN-92-6319308", group: "Identifier" },
  { id: "EIN Registry", group: "Registry" }
];

const links = [
  { source: "CORP-NUM-C2362627", target: "OpenCorporates" },
  { source: "LN-NAME-RYLE-TRAVIS-STEVEN", target: "LexisNexis" },
  { source: "PROP-SS-GUARANTEE-104-0190-003558", target: "IRS Form 1099-A" },
  { source: "IRS-TRACK-108541264370", target: "IRS Non-Filing" },
  { source: "EIN-92-6319308", target: "EIN Registry" }
];

const svg = d3.select("#traceMap").append("svg")
  .attr("width", "100%")
  .attr("height", 500);

const width = document.getElementById("traceMap").clientWidth;
const height = 500;

const simulation = d3.forceSimulation(nodes)
  .force("link", d3.forceLink(links).id(d => d.id).distance(120))
  .force("charge", d3.forceManyBody().strength(-300))
  .force("center", d3.forceCenter(width / 2, height / 2));

const link = svg.append("g")
  .selectAll("line")
  .data(links)
  .join("line")
  .attr("stroke", "#888")
  .attr("stroke-width", 2);

const node = svg.append("g")
  .selectAll("circle")
  .data(nodes)
  .join("circle")
  .attr("r", 10)
  .attr("fill", d => d.group === "Registry" ? "#0ff" : "#0f0")
  .call(drag(simulation));

const label = svg.append("g")
  .selectAll("text")
  .data(nodes)
  .join("text")
  .text(d => d.id)
  .attr("fill", "#eee")
  .attr("font-size", "12px");

function drag(simulation) {
  function dragstarted(event) {
    if (!event.active) simulation.alphaTarget(0.3).restart();
    event.subject.fx = event.subject.x;
    event.subject.fy = event.subject.y;
  }
  function dragged(event) {
    event.subject.fx = event.x;
    event.subject.fy = event.y;
  }
  function dragended(event) {
    if (!event.active) simulation.alphaTarget(0);
    event.subject.fx = null;
    event.subject.fy = null;
  }
  return d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended);
}

simulation.on("tick", () => {
  link
    .attr("x1", d => d.source.x)
    .attr("y1", d => d.source.y)
    .attr("x2", d => d.target.x)
    .attr("y2", d => d.target.y);

  node
    .attr("cx", d => d.x)
    .attr("cy", d => d.y);

  label
    .attr("x", d => d.x + 12)
    .attr("y", d => d.y + 4);
});
</script>
 <td class="verified">Verified</td>
  <td>IRS Form 1099-A</td>
  <td>2025-08-30 12:16 MST</td>
  <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
</tr>
<tr>
  <td>IRS-TRACK-108541264370</td>
  <td class="verified">Verified</td>
  <td>IRS Non-Filing Verification</td>
  <td>2025-08-30 12:15 MST</td>
  <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
</tr>
<tr>
  <td>EIN-92-6319308</td>
  <td class="verified">Verified</td>
  <td>EIN Registry Proxy</td>
  <td>2025-08-30 12:14 MST</td>
  <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
</tr>
 <td class="verified">Verified</td>
    <td>OpenCorporates</td>
    <td>2025-08-30 12:18 MST</td>
    <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
  </tr>
  <tr>
  <script>
document.getElementById('searchBar').addEventListener('input', function () {
  const query = this.value.toLowerCase();
  const rows = document.querySelectorAll('#results tr');
  for (let i = 1; i < rows.length; i++) {
    const rowText = rows[i].textContent.toLowerCase();
    rows[i].style.display = rowText.includes(query) ? '' : 'none';
  }
});
</script>

    <td>IRS Form 1099-A</td>
    <td>2025-08-30 12:16 MST</td>
    <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
  </tr>
  <tr>
    <td>IRS-TRACK-108541264370</td>
    <td class="verified">Verified</td>
    <td>IRS Non-Filing Verification</td>
    <td>2025-08-30 12:15 MST</td>
    <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
  </tr>
  <tr>
    <td>EIN-92-6319308</td>
    <td class="verified">Verified</td>
    <td>EIN Registry Proxy</td>
    <td>2025-08-30 12:14 MST</td>
    <td><a href="overlays/registry_overlay.yml" style="color:#0ff">View Overlay</a></td>
  </tr>
</table>

          const row = document.createElement('tr');
          const overlayLink = item.status === "verified"
            ? <a href='overlays/trust_overlay.yml' style='color:#0ff'>View Overlay</a>
            : "-";

          row.innerHTML = <td></td>
                           <td class=""></td>
                           <td></td>
                           <td></td>;
          table.appendChild(row);
        });

        summary.innerHTML = <p>Total Scanned: </p>
                             <p class='verified'>Verified: </p>
                             <p class='flagged'>Flagged: </p>
                             <p class='unmatched'>Unmatched: </p>;
      });
  </script>
</body>
</html>
